{"version":3,"sources":["tweetlife/tl-wordcloud/tl-wordcloud.js"],"names":["d3","TlWordcloud","EventAggregator","wordTotalNum","loading","eventAggregator","subscribe","data","wordCloudData","bioKeywords","length","splice","attached"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;;;AACA;;IAAYA,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAKCC,W,WAAAA,W,WAHZ,qCAAc,cAAd,C,UAEA,sE;AAQG,yBAAYC,eAAZ,EAA6B;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,aAH7BC,YAG6B,GAHd,EAGc;AAAA,aAF7BC,OAE6B,GAFnB,KAEmB;;AACzB,aAAKC,eAAL,GAAuBH,eAAvB;AACA,aAAKG,eAAL,CAAqBC,SAArB,CAA+B,cAA/B,EAA+C,YAAM;AACjD,kBAAKF,OAAL,GAAe,IAAf;AACH,SAFD;AAGA,aAAKC,eAAL,CAAqBC,SAArB,CAA+B,eAA/B,EAAgD,UAACC,IAAD,EAAU;AACtD,kBAAKH,OAAL,GAAe,KAAf;AACA,kBAAKI,aAAL,GAAqBD,KAAKE,WAA1B;;AAGA,gBAAI,MAAKD,aAAL,IAAuB,MAAKA,aAAL,CAAmBE,MAAnB,GAA4B,MAAKP,YAA5D,EAA2E;AACvE,sBAAKK,aAAL,GAAqB,MAAKA,aAAL,CAAmBG,MAAnB,CAA0B,CAA1B,EAA6B,MAAKR,YAAlC,CAArB;AACH;AACJ,SARD;AASA,aAAKE,eAAL,CAAqBC,SAArB,CAA+B,eAA/B,EAAgD,YAAM;AAClD,kBAAKF,OAAL,GAAe,KAAf;AACH,SAFD;AAIH;;0BAEDQ,Q,uBAAW,CAAE,C","file":"tl-wordcloud.js","sourceRoot":"/src","sourcesContent":["import { inject, customElement, bindable, containerless } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport _ from \"lodash\";\nimport * as d3 from 'd3';\n\n@customElement('tl-wordcloud')\n@containerless\n@inject(EventAggregator)\nexport class TlWordcloud {\n    @bindable data;\n    @bindable defaultView;\n\n    wordTotalNum = 30;\n    loading = false\n    \n    constructor(EventAggregator) {\n        this.eventAggregator = EventAggregator;\n        this.eventAggregator.subscribe('triggerFetch', () => {\n            this.loading = true;\n        })\n        this.eventAggregator.subscribe('tweetlifeData', (data) => {\n            this.loading = false;\n            this.wordCloudData = data.bioKeywords;\n\n            // control data number\n            if( this.wordCloudData && (this.wordCloudData.length > this.wordTotalNum)) {\n                this.wordCloudData = this.wordCloudData.splice(0, this.wordTotalNum);\n            }\n        })\n        this.eventAggregator.subscribe('noRootTweetId', () => {\n            this.loading = false;\n        })\n        \n    }\n\n    attached() {}\n}\n"]}