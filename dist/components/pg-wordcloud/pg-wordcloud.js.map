{"version":3,"sources":["components/pg-wordcloud/pg-wordcloud.js"],"names":["d3","ChartElement","Element","element","ColorInterval","scale","linear","attached","_createOrUpdate","_attached","dataChanged","detached","_wordcloud","undefined","_resize","that","wordsResult","data","large","value","small","length","domain","range","loading","forEach","item","idx","push","key","find","list","fontFamily","color","hover","window","drawBox","click","shap"],"mappings":";;;;;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;IAAYA,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAICC,Y,WAAAA,Y,WAFZ,qCAAc,cAAd,C,UACA,8BAAOC,OAAP,C;AASG,0BAAYC,OAAZ,EAAqB;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,aAFrBC,aAEqB,GAFL,EAEK;;AACjB,aAAKD,OAAL,GAAeA,OAAf;AACA,aAAKE,KAAL,GAAaL,GAAGK,KAAH,CAASC,MAAT,EAAb;AACH;;2BAEDC,Q,uBAAW;AAEP,aAAKC,eAAL;AACA,aAAKC,SAAL,GAAiB,IAAjB;AACH,K;;2BAEDC,W,0BAAc;AACV,aAAKF,eAAL;AACH,K;;2BAEDG,Q,uBAAW;AAEP,aAAKC,UAAL,GAAkBC,SAAlB;AACH,K;;2BAEDC,O,sBAAU,CAET,C;;2BAEDN,e,8BAAkB;AACd,YAAIO,OAAO,IAAX;;AAEA,aAAKC,WAAL,GAAmB,EAAnB;AACA,YAAI,KAAKC,IAAT,EAAe;AACX,gBAAIC,QAAQ,KAAKD,IAAL,CAAU,CAAV,EAAaE,KAAzB;AACA,gBAAIC,QAAQ,KAAKH,IAAL,CAAU,KAAKA,IAAL,CAAUI,MAAV,GAAiB,CAA3B,EAA8BF,KAA1C;AACA,iBAAKd,KAAL,CAAWiB,MAAX,CAAkB,CAACF,KAAD,EAAQF,KAAR,CAAlB,EAAkCK,KAAlC,CAAwC,CAAC,EAAD,EAAK,EAAL,CAAxC;AACA,iBAAKC,OAAL,GAAe,KAAf;AACA,iBAAKP,IAAL,CAAUQ,OAAV,CAAkB,UAASC,IAAT,EAAeC,GAAf,EAAoB;AAClCZ,qBAAKC,WAAL,CAAiBY,IAAjB,CAAsB,CAACF,KAAKG,GAAN,EAAWd,KAAKV,KAAL,CAAWqB,KAAKP,KAAhB,CAAX,CAAtB;AACH,aAFD;;AAIA,qCAAU,sBAAE,KAAKhB,OAAP,EAAgB2B,IAAhB,CAAqB,eAArB,EAAsC,CAAtC,CAAV,EAAoD;AAChDC,sBAAM,KAAKf,WADqC;;AAIhDgB,4BAAY,mCAJoC;AAKhDC,uBAAO,aALyC;AAMhDC,uBAAOC,OAAOC,OANkC;AAOhDC,uBAAO,eAASX,IAAT,EAAe,CAErB,CAT+C;AAUhDY,sBAAM;AAV0C,aAApD;AAcH,SAvBD,MAuBO;AACH,iBAAK1B,UAAL,GAAkBC,SAAlB;AAEH;AACJ,K;;;;;;;;;;;;eA5DmB,E","file":"pg-wordcloud.js","sourceRoot":"/src","sourcesContent":["import { inject, customElement, bindable } from 'aurelia-framework'\nimport $ from 'jquery';\nimport wordcloud from 'wordcloud';\nimport * as d3 from 'd3';\n\n@customElement('pg-wordcloud')\n@inject(Element)\nexport class ChartElement {\n    @bindable data;\n    @bindable loading;\n    @bindable options = {};\n\n    _wordcloud;\n    ColorInterval = 10;\n\n    constructor(element) {\n        this.element = element;\n        this.scale = d3.scale.linear();\n    }\n\n    attached() {\n        // workaround https://github.com/aurelia/templating/issues/400\n        this._createOrUpdate();\n        this._attached = true;\n    }\n\n    dataChanged() {\n        this._createOrUpdate();\n    }\n\n    detached() {\n        // console.log('wordcloud detached');\n        this._wordcloud = undefined;\n    }\n\n    _resize() {\n\n    }\n\n    _createOrUpdate() {\n        var that = this;\n\n        this.wordsResult = [];\n        if (this.data) {\n            let large = this.data[0].value;\n            let small = this.data[this.data.length-1].value\n            this.scale.domain([small, large]).range([20, 60]);\n            this.loading = false;\n            this.data.forEach(function(item, idx) {\n                that.wordsResult.push([item.key, that.scale(item.value)]);\n            });\n            //x => { return x / 10; },\n            wordcloud($(this.element).find('.pg-wordcloud')[0], {\n                list: this.wordsResult,\n                // gridSize: 18,\n                // weightFactor: x => { return x / 100; },\n                fontFamily: 'Finger Paint, cursive, sans-serif',\n                color: 'random-dark',\n                hover: window.drawBox,\n                click: function(item) {\n                    // alert(item[0] + ': ' + item[1]);\n                },\n                shap: 'circle',\n                // backgroundColor: '#001f00'\n            });\n\n        } else {\n            this._wordcloud = undefined;\n\n        }\n    }\n\n}"]}